<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Settings - Bypass Zone</title>

<style>
/* SAME GLOBAL STYLE AS OTHER PAGES */
* { margin:0; padding:0; box-sizing:border-box; font-family:"Inter", sans-serif; }

body {
    display:flex;
    min-height:100vh;
    background: linear-gradient(135deg, #02070b, #031423, #041b33);
    background-size: 200% 200%;
    animation: gradientMove 12s infinite ease-in-out;
    color:white;
}

@keyframes gradientMove {
    0% {background-position:0 0;}
    50%{background-position:100% 100%;}
    100%{background-position:0 0;}
}

/* SIDEBAR */
#sidebar {
    width:250px;
    background: rgba(0,0,0,0.25);
    backdrop-filter: blur(20px);
    padding:25px 20px;
    display:flex;
    flex-direction:column;
    gap:30px;
    transition: width 0.3s ease;
    overflow:hidden;
    color:#fff;
}
#sidebar.collapsed { width:70px; }

#hamburger-title {
    display:flex; align-items:center; gap:15px; cursor:pointer;
}

.hamburger { width:25px; height:2px; background:white; position:relative; }
.hamburger::before, .hamburger::after {
    content:""; width:25px; height:2px; background:white; position:absolute;
    left:0; transition:0.25s;
}
.hamburger::before { top:-8px; }
.hamburger::after { top:8px; }

#sidebar h1 {
    font-size:22px; font-weight:600; white-space:nowrap;
    transition: 0.3s ease, opacity 0.3s ease;
}
#sidebar.collapsed h1 { opacity:0; width:0; overflow:hidden; }

/* TABS */
.tabs { display:flex; flex-direction:column; gap:10px; }
.tab {
    display:flex; align-items:center;
    gap:10px; padding:12px 10px;
    border-radius:8px; cursor:pointer;
    transition: background 0.25s;
}
.tab.active, .tab:hover { background: rgba(0,200,255,0.25); }

.tab .label { white-space:nowrap; }
#sidebar.collapsed .label { opacity:0; width:0; overflow:hidden; }

/* ICON SIZE FIX */
.tab .icon {
    font-size:18px;
    width:18px;
    display:inline-block;
    text-align:center;
}

/* MAIN CONTENT */
#main {
    flex:1; padding:40px;
    margin-right:100px;
    display:flex; flex-direction:column; gap:25px;
}

.content-card {
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(20px);
    padding:25px;
    border-radius:15px;
}

/* PROFILE */
#profile-container { position:absolute; top:25px; right:25px; }
#pfp {
    width:55px; height:55px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-size:24px; font-weight:bold;
    border:2px solid rgba(255,255,255,0.4);
    cursor:pointer;
}
#dropdown {
    position:absolute; right:0; top:70px;
    width:200px;
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(12px);
    padding:15px; border-radius:12px;
    display:none;
}
#logout-btn {
    width:100%; padding:10px; background:#ff4545;
    border:none; border-radius:8px; color:white; cursor:pointer;
}
#logout-btn:hover { background:#d93636; }

/* ADMIN POPUP */
#admin-popup-wrapper {
    position:fixed;
    top:0; left:0; right:0; bottom:0;
    display:none;
    justify-content:center;
    align-items:center;
    backdrop-filter: blur(5px);
    background: rgba(0,0,0,0.35);
    z-index:999;
}

#admin-popup {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(25px);
    padding:25px;
    border-radius:15px;
    width:350px;
    position:relative;
    text-align:center;
    color:white;
}

#admin-popup input {
    width:90%;
    padding:10px;
    margin-top:15px;
    border-radius:8px;
    border:none;
}

#admin-popup button {
    margin-top:15px;
    width:100%;
    padding:10px;
    background:#00c8ff;
    border:none;
    border-radius:8px;
    color:black;
    font-weight:bold;
    cursor:pointer;
}
#admin-popup button:hover { background:#00b5e6; }

#admin-error {
    color:#ff4d4d;
    margin-top:10px;
    display:none;
}

/* X BUTTON */
#close-popup {
    position:absolute;
    top:10px;
    right:15px;
    cursor:pointer;
    font-size:20px;
    font-weight:bold;
}
#close-popup:hover { color:#ff4747; }
</style>
</head>
<body>

<!-- SIDEBAR -->
<div id="sidebar">
    <div id="hamburger-title">
        <div class="hamburger"></div>
        <h1>Bypass Zone</h1>
    </div>

    <div class="tabs">

        <div class="tab" id="dashboard-tab">
            <span class="icon">üè†</span>
            <span class="label">Dashboard</span>
        </div>

        <div class="tab" id="websites-tab">
            <span class="icon">üîó</span>
            <span class="label">Websites</span>
        </div>


        <div class="tab active" id="settings-tab">
            <span class="icon">‚öôÔ∏è</span>
            <span class="label">Settings</span>
        </div>
    </div>
</div>

<!-- MAIN -->
<div id="main">
    <div class="content-card">
        <h2>Account Settings</h2>

        <p><b>Username:</b> <span id="user-display"></span></p>
        <p><b>Password:</b> <span id="password-dots">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span></p>

        <button id="view-pass-btn" style="margin-top:10px;">View Password</button>
        <button id="change-pass-btn" style="margin-top:10px;">Change Password</button>
    </div>
</div>

<!-- PROFILE -->
<div id="profile-container">
    <div id="pfp">A</div>

    <div id="dropdown">
        <div id="username-display"></div>
        <button id="logout-btn">Log Out</button>
    </div>
</div>

<!-- ADMIN PERMISSION POPUP -->
<div id="admin-popup-wrapper">
    <div id="admin-popup">
        <div id="close-popup">‚úñ</div>

        <h2>Administrator Permission Required</h2>

        <input type="password" id="admin-code" placeholder="Enter Administrator Code">
        <button id="admin-continue">Continue</button>

        <div id="admin-error">The code you entered is incorrect!</div>
    </div>
</div>

<script>
/* ACCESS CONTROL */
const username = sessionStorage.getItem("loggedInUser");
const password = sessionStorage.getItem("loggedInPass");

if (!username) window.location.href="index.html";

document.getElementById("user-display").textContent = username;
document.getElementById("username-display").textContent = username;

/* PFP COLOR (persistent) */
const pfp = document.getElementById("pfp");
pfp.textContent = username.charAt(0).toUpperCase();

let savedColor = sessionStorage.getItem("pfpColor");
if (!savedColor) {
    const colors = ["#1E90FF","#FF4500","#32CD32","#FFD700","#6A5ACD","#FF69B4","#00CED1"];
    savedColor = colors[Math.floor(Math.random()*colors.length)];
    sessionStorage.setItem("pfpColor", savedColor);
}
pfp.style.backgroundColor = savedColor;

/* DROPDOWN */
let openDrop=false;
const dropdown=document.getElementById("dropdown");
pfp.addEventListener("click",()=>{
    openDrop=!openDrop;
    dropdown.style.display=openDrop?"block":"none";
});
document.addEventListener("click",(e)=>{
    if(!pfp.contains(e.target)&&!dropdown.contains(e.target)){
        dropdown.style.display="none"; openDrop=false;
    }
});
document.getElementById("logout-btn").addEventListener("click",()=>{
    sessionStorage.clear();
    window.location.href="index.html";
});

/* TAB REDIRECTS */
document.getElementById("dashboard-tab").addEventListener("click",()=>{ window.location.href="dashboard.html"; });
document.getElementById("websites-tab").addEventListener("click",()=>{ window.location.href="websites.html"; });

/* SIDEBAR COLLAPSE */
document.getElementById("hamburger-title").addEventListener("click",()=>{
    document.getElementById("sidebar").classList.toggle("collapsed");
});

/* ADMIN POPUP LOGIC */
const popup = document.getElementById("admin-popup-wrapper");
const adminError = document.getElementById("admin-error");

let pendingAction = null; // "view" or "change"

function requireAdmin(action) {
    pendingAction = action;
    popup.style.display = "flex";
    adminError.style.display = "none";
    document.body.style.filter = "blur(3px)";
}

document.getElementById("close-popup").addEventListener("click",()=>{
    popup.style.display = "none";
    document.body.style.filter = "none";
});

document.getElementById("admin-continue").addEventListener("click",()=>{
    const code = document.getElementById("admin-code").value;

    const correctCode = "1234"; // CHANGE THIS TO YOUR SECURE CODE

    if (code !== correctCode) {
        adminError.style.display="block";
        return;
    }

    // success
    popup.style.display="none";
    document.body.style.filter="none";

    if (pendingAction === "view") {
        document.getElementById("password-dots").textContent = password;
    }

    if (pendingAction === "change") {
        let newPass = prompt("Enter a new password:");

        if (newPass && newPass.trim() !== "") {
            sessionStorage.setItem("loggedInPass", newPass);
            alert("Password successfully changed!");
        }
    }

    document.getElementById("admin-code").value = "";
});

/* BUTTON ACTIONS */
document.getElementById("view-pass-btn").addEventListener("click",()=>{
    requireAdmin("view");
});

document.getElementById("change-pass-btn").addEventListener("click",()=>{
    requireAdmin("change");
});
</script>

</body>
</html>
